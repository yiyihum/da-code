{
    "id": "dbt001",
    "source": "https://docs.getdbt.com/guides/manual-install?step=13",
    "image_name": "bash-py-postgres-dbt",
    "init_args": {
        "work_dir": "/workspace",
        "ports": {
            "8020": "12002",
            "5432": "12001"
        }
    },
    "instruction": "Update models/schema.yml to add descriptions: 1) Add description for each table; 2) Add \"Primary key\" description to each table's primary key column; 3) Add description for customers.first_order_date column: \"NULL when a customer has not yet placed an order.\" Then, generate documentation for this project and launch the website on port 8020.",
    "hardness": "level4",
    "config": [
        {
            "type": "download_and_execute",
            "parameters": {
                "url": "https://drive.usercontent.google.com/download?id=15XhqNngQTvB5O1QXEYFx9-OLY6kEiUDO&export=download&authuser=0&confirm=t",
                "path": "/workspace/init.sh"
            }
        }
    ],
    "evaluator": {
        "func": [
            "check_yaml_file",
            "check_include_exclude"
        ],
        "conj": "and",
        "result": [
            {
                "type": "docker_file",
                "path": "/workspace/models/schema.yml"
            },
            {
                "type": "docker_script_output",
                "url": "https://drive.usercontent.google.com/download?id=1xOwSn44kOkJnhM-PjtAcsENUNTEsIrdV&export=download&authuser=0&confirm=t",
                "dest": "/workspace/eval.sh"
            }
        ],
        "expected": [
            {
                "type": "rule",
                "rules": [
                    ["not_null", ["models", ["name", "customers"], "description"], ""],
                    ["not_null", ["models", ["name", "stg_customers"], "description"], ""],
                    ["not_null", ["models", ["name", "stg_orders"], "description"], ""],
                    ["contain", ["models", ["name", "customers"], "columns", ["name", "customer_id"], "description"], "Primary key"],
                    ["contain", ["models", ["name", "stg_customers"], "columns", ["name", "customer_id"], "description"], "Primary key"],
                    ["contain", ["models", ["name", "stg_orders"], "columns", ["name", "order_id"], "description"], "Primary key"],
                    ["contain", ["models", ["name", "customers"], "columns", ["name", "first_order_date"], "description"], "NULL when a customer has not yet placed an order"]
                ]
            },
            {
                "type": "rule",
                "rules": {
                    "include": [
                        "succeed"
                    ],
                    "exclude": [
                        "failed"
                    ]
                }
            }
        ]
    }
}