version: 1.0
output_schema:
  description: >
    This schema defines the structure of the output dataset from a SQL transformation that applies Statistical Process Control (SPC) techniques to monitor and control the manufacturing process. The transformation calculates rolling statistics for height measurements and evaluates these against calculated control limits to flag any out-of-spec measurements.
    $ucl = avg\_height + 3 * \frac{stddev\_height}{\sqrt{5}}$
    $lcl = avg\_height - 3 * \frac{stddev\_height}{\sqrt{5}}$

  columns:
    - name: operator
      type: string
      description: "Identifier for the operator managing the measurement process, helping track which operator was responsible for each part."

    - name: row_number
      type: integer
      description: "A sequential number representing the order of measurement entries for each operator, used for maintaining the rolling window of measurements."

    - name: height
      type: float
      description: "The actual height measurement of the manufactured part, as recorded during the production process."

    - name: avg_height
      type: float
      description: "The average height calculated over a rolling window of the last five measurements, providing a baseline to determine variability in the process."

    - name: stddev_height
      type: float
      description: "The standard deviation of heights within the rolling window, used to assess the variability and stability of the manufacturing process."

    - name: ucl
      type: float
      description: "Upper Control Limit calculated for the height measurements, used to flag measurements that are too high, indicating potential issues in the manufacturing process."

    - name: lcl
      type: float
      description: "Lower Control Limit calculated for the height measurements, used to flag measurements that are too low, indicating potential issues in the manufacturing process."

    - name: alert
      type: boolean
      description: "A boolean flag indicating whether the height measurement falls outside the control limits (true if it does, false if it does not), used for immediate identification of potential quality issues."

